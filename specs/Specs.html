<?xml version="1.0" encoding="UTF-8"?><html xmlns:e="http://exam.extension.io" xmlns:cc="http://www.concordion.org/2007/concordion" xmlns:c="http://www.concordion.org/2007/concordion" xmlns:concordion="http://www.concordion.org/2007/concordion" lang="en">
<head><meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="generator" content="Asciidoctor 2.0.20" />
<title>Exam BDD Framework</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700" />
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content&gt;.title,.audioblock&gt;.title,.exampleblock&gt;.title,.imageblock&gt;.title,.listingblock&gt;.title,.literalblock&gt;.title,.stemblock&gt;.title,.openblock&gt;.title,.paragraph&gt;.title,.quoteblock&gt;.title,table.tableblock&gt;.title,.verseblock&gt;.title,.videoblock&gt;.title,.dlist&gt;.title,.olist&gt;.title,.ulist&gt;.title,.qlist&gt;.title,.hdlist&gt;.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock&gt;.content&gt;.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock&gt;.content&gt;.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock&gt;.content&gt;.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock&gt;.content&gt;.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock&gt;.content&gt;.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock&gt;.content&gt;.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock&gt;.content&gt;.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock&gt;.content&gt;.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])&gt;code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre&gt;code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a&gt;code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header&gt;h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header&gt;h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header&gt;h1:only-child,body.toc2 #header&gt;h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content&gt;h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc&gt;ul{margin-left:.125em}
#toc ul.sectlevel0&gt;li&gt;a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2&gt;ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2&gt;ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc&gt;:first-child{margin-top:0}
#content #toc&gt;:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1&gt;a.anchor,h2&gt;a.anchor,h3&gt;a.anchor,#toctitle&gt;a.anchor,.sidebarblock&gt;.content&gt;.title&gt;a.anchor,h4&gt;a.anchor,h5&gt;a.anchor,h6&gt;a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1&gt;a.anchor::before,h2&gt;a.anchor::before,h3&gt;a.anchor::before,#toctitle&gt;a.anchor::before,.sidebarblock&gt;.content&gt;.title&gt;a.anchor::before,h4&gt;a.anchor::before,h5&gt;a.anchor::before,h6&gt;a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover&gt;a.anchor,#content h1&gt;a.anchor:hover,h2:hover&gt;a.anchor,h2&gt;a.anchor:hover,h3:hover&gt;a.anchor,#toctitle:hover&gt;a.anchor,.sidebarblock&gt;.content&gt;.title:hover&gt;a.anchor,h3&gt;a.anchor:hover,#toctitle&gt;a.anchor:hover,.sidebarblock&gt;.content&gt;.title&gt;a.anchor:hover,h4:hover&gt;a.anchor,h4&gt;a.anchor:hover,h5:hover&gt;a.anchor,h5&gt;a.anchor:hover,h6:hover&gt;a.anchor,h6&gt;a.anchor:hover{visibility:visible}
#content h1&gt;a.link,h2&gt;a.link,h3&gt;a.link,#toctitle&gt;a.link,.sidebarblock&gt;.content&gt;.title&gt;a.link,h4&gt;a.link,h5&gt;a.link,h6&gt;a.link{color:#ba3925;text-decoration:none}
#content h1&gt;a.link:hover,h2&gt;a.link:hover,h3&gt;a.link:hover,#toctitle&gt;a.link:hover,.sidebarblock&gt;.content&gt;.title&gt;a.link:hover,h4&gt;a.link:hover,h5&gt;a.link:hover,h6&gt;a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details&gt;summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details&gt;summary::-webkit-details-marker{display:none}
details&gt;summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]&gt;summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details&gt;summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content&gt;.title,.audioblock&gt;.title,.exampleblock&gt;.title,.imageblock&gt;.title,.listingblock&gt;.title,.literalblock&gt;.title,.stemblock&gt;.title,.openblock&gt;.title,.paragraph&gt;.title,.quoteblock&gt;.title,table.tableblock&gt;.title,.verseblock&gt;.title,.videoblock&gt;.title,.dlist&gt;.title,.olist&gt;.title,.ulist&gt;.title,.qlist&gt;.title,.hdlist&gt;.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content&gt;caption.title{white-space:nowrap;width:0}
.paragraph.lead&gt;p,#preamble&gt;.sectionbody&gt;[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock&gt;table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock&gt;table td.icon{text-align:center;width:80px}
.admonitionblock&gt;table td.icon img{max-width:none}
.admonitionblock&gt;table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock&gt;table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock&gt;table td.content&gt;:last-child&gt;:last-child{margin-bottom:0}
.exampleblock&gt;.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock&gt;.content&gt;.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock&gt;.content&gt;:first-child,.sidebarblock&gt;.content&gt;:first-child{margin-top:0}
.exampleblock&gt;.content&gt;:last-child,.exampleblock&gt;.content&gt;:last-child&gt;:last-child,.exampleblock&gt;.content .olist&gt;ol&gt;li:last-child&gt;:last-child,.exampleblock&gt;.content .ulist&gt;ul&gt;li:last-child&gt;:last-child,.exampleblock&gt;.content .qlist&gt;ol&gt;li:last-child&gt;:last-child,.sidebarblock&gt;.content&gt;:last-child,.sidebarblock&gt;.content&gt;:last-child&gt;:last-child,.sidebarblock&gt;.content .olist&gt;ol&gt;li:last-child&gt;:last-child,.sidebarblock&gt;.content .ulist&gt;ul&gt;li:last-child&gt;:last-child,.sidebarblock&gt;.content .qlist&gt;ol&gt;li:last-child&gt;:last-child{margin-bottom:0}
.literalblock pre,.listingblock&gt;.content&gt;pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock&gt;.content&gt;pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock&gt;.content&gt;pre{font-size:1em}}
.literalblock pre,.listingblock&gt;.content&gt;pre:not(.highlight),.listingblock&gt;.content&gt;pre[class=highlight],.listingblock&gt;.content&gt;pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock&gt;.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs&gt;code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)&gt;.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote&gt;.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract&gt;.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt&gt;blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock&gt;.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock&gt;.content&gt;:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all&gt;*&gt;tr&gt;*{border-width:1px}
table.grid-cols&gt;*&gt;tr&gt;*{border-width:0 1px}
table.grid-rows&gt;*&gt;tr&gt;*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none&gt;colgroup+*&gt;:first-child&gt;*,table.frame-sides&gt;colgroup+*&gt;:first-child&gt;*{border-top-width:0}
table.frame-none&gt;:last-child&gt;:last-child&gt;*,table.frame-sides&gt;:last-child&gt;:last-child&gt;*{border-bottom-width:0}
table.frame-none&gt;*&gt;tr&gt;:first-child,table.frame-ends&gt;*&gt;tr&gt;:first-child{border-left-width:0}
table.frame-none&gt;*&gt;tr&gt;:last-child,table.frame-ends&gt;*&gt;tr&gt;:last-child{border-right-width:0}
table.stripes-all&gt;*&gt;tr,table.stripes-odd&gt;*&gt;tr:nth-of-type(odd),table.stripes-even&gt;*&gt;tr:nth-of-type(even),table.stripes-hover&gt;*&gt;tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock&gt;code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child&gt;:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li&gt;p:empty:only-child::before{content:"";display:inline-block}
ul.checklist&gt;li&gt;p:first-child{margin-left:-1em}
ul.checklist&gt;li&gt;p:first-child&gt;.fa-square-o:first-child,ul.checklist&gt;li&gt;p:first-child&gt;.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist&gt;li&gt;p:first-child&gt;input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline&gt;li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist&gt;table,.colist&gt;table{border:0;background:none}
.hdlist&gt;table&gt;tbody&gt;tr,.colist&gt;table&gt;tbody&gt;tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock&gt;.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb&gt;.title,.imageblock.th&gt;.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon&gt;.fa{cursor:default}
a span.icon&gt;.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock&gt;.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock&gt;.content&gt;.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock&gt;.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header&gt;h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1&gt;h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header&gt;h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
<link type="text/css" rel="stylesheet" href="../ext/bootstrap/bootstrap.min.css" /><link type="text/css" rel="stylesheet" href="../ext/bootstrap/enable-bootstrap.css" /><link type="text/css" rel="stylesheet" href="../ext/bootstrap/doc.min.css" /><link type="text/css" rel="stylesheet" href="../ext/bootstrap/scrollToTop.css" /><script type="text/javascript" src="../ext/bootstrap/bootstrap.bundle.min.js"></script><script type="text/javascript" src="../ext/bootstrap/jquery-3.2.1.slim.min.js"></script><script type="text/javascript" src="../ext/bootstrap/sidebar.js"></script><script type="text/javascript" src="../ext/bootstrap/doc.min.js"></script><script type="text/javascript" src="../ext/bootstrap/scrollToTop.js"></script><link type="text/css" rel="stylesheet" href="../ext/ascii/css/site.css" /><link type="text/css" rel="stylesheet" href="../ext/ascii/css/font.css" /><link type="text/css" rel="stylesheet" href="../ext/ascii/css/font-awesome.css" /><link type="text/css" rel="stylesheet" href="../ext/ascii/css/tune.css" /><link type="text/css" rel="stylesheet" href="../ext/codemirror/codemirror.css" /><link type="text/css" rel="stylesheet" href="../ext/codemirror/enable-codemirror.css" /><link type="text/css" rel="stylesheet" href="../ext/codemirror/merge.css" /><link type="text/css" rel="stylesheet" href="../ext/codemirror/foldgutter.css" /><link type="text/css" rel="stylesheet" href="../ext/codemirror/simplescrollbar.css" /><script type="text/javascript" src="../ext/codemirror/codemirror.js"></script><script type="text/javascript" src="../ext/codemirror/enable-codemirror.js"></script><script type="text/javascript" src="../ext/codemirror/javascript.js"></script><script type="text/javascript" src="../ext/codemirror/xml.js"></script><script type="text/javascript" src="../ext/codemirror/addon/mode/simple.js"></script><script type="text/javascript" src="../ext/codemirror/http.js"></script><script type="text/javascript" src="../ext/codemirror/diff_match_patch.js"></script><script type="text/javascript" src="../ext/codemirror/merge.js"></script><script type="text/javascript" src="../ext/codemirror/xml-fold.js"></script><script type="text/javascript" src="../ext/codemirror/simplescrollbar.js"></script><link type="text/css" rel="stylesheet" href="../ext/fontawesome/css/all.min.css" /><link type="text/css" rel="stylesheet" href="../ext/fontawesome/css/regular.min.css" /><link type="text/css" rel="stylesheet" href="../ext/fontawesome/css/solid.min.css" /><link type="text/css" rel="stylesheet" href="../ext/fontawesome/css/all.min.css" /></head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Exam BDD Framework</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_overview">Overview</a></li>
<li><a href="#_core">Core</a>
<ul class="sectlevel2">
<li><a href="#e-eq">e-eq</a></li>
<li><a href="#e-set">e-set</a></li>
<li><a href="#e-execute">e-execute</a></li>
<li><a href="#e-verify-rows">e-verify-rows</a></li>
<li><a href="#e-run">e-run</a></li>
<li><a href="#e-echo">e-echo</a></li>
<li><a href="#e-example">example command</a></li>
<li><a href="#handlebars">Handlebar support</a></li>
</ul>
</li>
<li><a href="#_web_service_plugin">Web Service plugin</a>
<ul class="sectlevel2">
<li><a href="#_e_http">e-http</a></li>
</ul>
</li>
<li><a href="#_sql_database_plugin">SQL Database plugin</a>
<ul class="sectlevel2">
<li><a href="#e-db-set">e-db-set</a></li>
<li><a href="#e-db-check">e-db-check</a></li>
<li><a href="#e-db-clean">e-db-clean</a></li>
<li><a href="#e-db-execute">e-db-execute</a></li>
<li><a href="#e-db-verify">e-db-verify</a></li>
<li><a href="#e-db-show">e-db-show</a></li>
</ul>
</li>
<li><a href="#_message_queue_plugin">Message Queue plugin</a>
<ul class="sectlevel2">
<li><a href="#e-mq-set">e-mq-set</a></li>
<li><a href="#e-mq-check">e-mq-check</a></li>
<li><a href="#e-mq-clean">e-mq-clean</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph lead">
<p>Extension for <a href="https://github.com/concordion/concordion/">Concordion BDD framework</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Exam is oriented on <strong>declarative end-to-end <a href="https://en.wikipedia.org/wiki/Gray_box_testing">gray-box application testing</a></strong>
in a way a manual tester would do it: send request, verify response/database/message queue etc.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/manual.png" alt="manual" width="302" height="205" />
</div>
<div class="title">Figure 1. Manual testing</div>
</div>
<div class="paragraph">
<p>Hence, the Exam functionality falls apart in <strong>different libraries (plugins)</strong> that are tailored
for specific kinds of checks: <em>database interactions, message queue interactions,
http interactions, file system interactions etc.</em> and may be used separately.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/exam.png" alt="exam" width="302" height="205" />
</div>
<div class="title">Figure 2. Exam testing</div>
</div>
<div class="paragraph">
<p>Each library consist of a <strong>plugin class</strong> that should be configured and attached to <code>ExamExtension</code>
and <strong>set of commands</strong> that can be used for instrumenting <em>.adoc</em> specification files.</p>
</div>
<div class="paragraph">
<p>Exam could be enabled by implementing <code>io.github.adven27.concordion.extensions.exam.core.AbstractSpecs</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight.js highlight"><code data-lang="kotlin">class Specs : AbstractSpecs() {

    override fun init() = ExamExtension(
        WsPlugin(
            host = "localhost",
            port = 8080
        ),
        DbPlugin(
            driver = "org.postgresql.Driver",
            url = "jdbc:postgresql://localhost:5432/postgres",
            user = "postgres",
            password = "postgres"
        )
    )

    /*  Methods in order of execution: */

    override fun beforeSetUp() {
        // Optional: Run some actions BEFORE Exam set up
    }
    override fun beforeSutStart() {
        // Optional: Run some actions AFTER Exam set up and BEFORE start of a System Under Test (SUT)
    }
    override fun startSut() {
        // Start SUT before specs suite if needed
    }
    override fun stopSut() {
        // Stop SUT after specs suite if needed
    }
    override fun afterSutStop() {
        // Optional: Run some actions AFTER stop of a SUT and BEFORE Exam tear down
    }
    override fun afterTearDown() {
        // Optional: Run some actions AFTER Exam tear down
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_core">Core</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Core commands enable abstract interactions and verifying capabilities.</p>
</div>
<div class="ulist unstyled">
<div class="title">Commands</div>
<ul class="unstyled">
<li>
<p><code><a href="#e-eq">e-eq</a></code></p>
</li>
<li>
<p><code><a href="#e-set">e-set</a></code></p>
</li>
<li>
<p><code><a href="#e-execute">e-execute</a></code></p>
</li>
<li>
<p><code><a href="#e-verify-rows">e-verify-rows</a></code></p>
</li>
<li>
<p><code><a href="#e-run">e-run</a></code></p>
</li>
<li>
<p><code><a href="#e-echo">e-echo</a></code></p>
</li>
<li>
<p><code><a href="#e-example">example command</a></code></p>
</li>
<li>
<p><code><a href="#handlebars">Handlebar support</a></code></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="e-eq">e-eq</h3>
<div class="paragraph">
<p>Verifies an equality of instrumented block and instrumentation expression result.</p>
</div>
<div class="hdlist">
<div class="title">Attributes</div>
<table>
<tr>
<td class="hdlist1">
<code>verifier</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: <code>text</code>.</em></p>
<div class="paragraph">
<p>Content type verifier. Built-in values: <code>text</code>, <code>json</code>, <code>xml</code>.</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>awaitAtMostSec</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: 4.</em></p>
<div class="paragraph">
<p>How long to wait in seconds before failing the verification</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>awaitPollDelayMillis</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: 0.</em></p>
<div class="paragraph">
<p>How long to wait in millis before starting verification</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>awaitPollIntervalMillis</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: 1000.</em></p>
<div class="paragraph">
<p>How long to wait in millis between verification attempts</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important" />
</td>
<td class="content">
<strong>Waiting is disabled by default</strong>. Check will fail immediately in case of mismatch unless at least one of the
<code>awaitAtMostSec</code>, <code>awaitPollDelayMillis</code> or <code>awaitPollIntervalMillis</code> attributes are set.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Usage</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">Given `greeting()` method returns `Hello World!`
expected result is: [e-eq=greeting()]_Hello World!_</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Given <code>greeting()</code> method returns <code>Hello World!</code>
expected result is: <em e:eq="greeting()" class=" success">Hello World!</em></p>
</div>
</div>
</div>
<div class="listingblock">
<div class="title">JSON verifying</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">Given `someJson()` method returns `{"result": 1}`
expected result is: [e-verifier=json e-eq=someJson()]_{"result": "{{number}}" }_. +
Short version: [e-eq-json=someJson()]_{"result": "{{number}}"}_. +
On listing:
[source,json,e-eq-json=someJson()]
--
{"result": "{{number}}"}
--</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Given <code>someJson()</code> method returns <code>{"result": 1}</code>
expected result is: <em e:eq="someJson()" e:verifier="json" class=" success">{"result": "${json-unit.any-number}" }</em>.<br />
Short version: <em e:eq-json="someJson()" class=" success">{"result": "${json-unit.any-number}"}</em>.<br />
On listing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight.js highlight"><code e:eq-json="someJson()" data-lang="json" class="success">{"result": "${json-unit.any-number}"}</code></pre>
</div>
</div>
</div>
</div>
<div class="listingblock">
<div class="title">XML verifying</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">Given `someXml()` method returns `&lt;result&gt;1&lt;/result&gt;`
expected result is: [e-verifier=xml e-eq=someXml()]_&lt;result&gt;{{number}}&lt;/result&gt;_. +
Short version: [e-eq-xml=someXml()]_&lt;result&gt;{{number}}&lt;/result&gt;_. +
On listing:
[source,xml,e-eq-xml=someXml()]
--
&lt;result&gt;{{number}}&lt;/result&gt;
--</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Given <code>someXml()</code> method returns <code>&lt;result&gt;1&lt;/result&gt;</code>
expected result is: <em e:eq="someXml()" e:verifier="xml" class=" success">&lt;result&gt;${xml-unit.any-number}&lt;/result&gt;</em>.<br />
Short version: <em e:eq-xml="someXml()" class=" success">&lt;result&gt;${xml-unit.any-number}&lt;/result&gt;</em>.<br />
On listing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight.js highlight"><code e:eq-xml="someXml()" data-lang="xml" class="success">&lt;result&gt;${xml-unit.any-number}&lt;/result&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="e-set">e-set</h3>
<div class="paragraph">
<p>Sets a specification variable which could be used in other commands expressions.</p>
</div>
<div class="listingblock">
<div class="title">Usage</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">The greeting for user [e-set=firstName]_Bob_ will be: [e-eq=greetingFor(#firstName)]_Hello Bob!_</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>The greeting for user <em class="e-set=firstName" e:set="firstName">Bob</em> will be: <em e:eq="greetingFor(#firstName)" class=" success">Hello Bob!</em></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Variable can be initialized with text, object and file content.</p>
</div>
<div class="listingblock">
<div class="title">Initialization with string from template:</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">[.when]
Set `someText` =  [e-set=someText]`some text`
and set `template` = [e-set=template]`someText: {{someText}}, current timestamp: {{iso (at)}}`
[.then]
`template` equals [e-eq=#template]`someText: {{someText}}, current timestamp: {{iso (at)}}`</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph when">
<p>Set <code>someText</code> =  <code class="e-set=someText" e:set="someText">some text</code>
and set <code>template</code> = <code class="e-set=template" e:set="template">someText: some text, current timestamp: 2024-01-18T23:15:05.351</code></p>
</div>
<div class="paragraph then">
<p><code>template</code> equals <code e:eq="#template" class=" success">someText: some text, current timestamp: 2024-01-18T23:15:05.351</code></p>
</div>
</div>
</div>
<div class="listingblock">
<div class="title">Initialization with object:</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">[.when]
Set `mapObject` = [e-set=mapObject]`{{map a='1' b='2'}}`
[.then]
`mapObject.a` equals [e-eq=#mapObject.a]`1` +
`mapObject.b` equals [e-eq=#mapObject.b]`2`</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph when">
<p>Set <code>mapObject</code> = <code class="e-set=mapObject" e:set="mapObject">{a=1, b=2}</code></p>
</div>
<div class="paragraph then">
<p><code>mapObject.a</code> equals <code e:eq="#mapObject.a" class=" success">1</code><br />
<code>mapObject.b</code> equals <code e:eq="#mapObject.b" class=" success">2</code></p>
</div>
</div>
</div>
<div class="listingblock">
<div class="title">Initialization with string from file template:</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">[.when]
Set `fileTemplate` = [e-set=fileTemplate]`{{file '/data/core/file.txt' v='123'}}`
[.then]
`fileTemplate` equals [e-eq=#fileTemplate]`File template: v = 123, someText = some text`</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph when">
<p>Set <code>fileTemplate</code> = <code class="e-set=fileTemplate" e:set="fileTemplate">File template: v = 123, someText = some text</code></p>
</div>
<div class="paragraph then">
<p><code>fileTemplate</code> equals <code e:eq="#fileTemplate" class=" success">File template: v = 123, someText = some text</code></p>
</div>
</div>
</div>
<div class="listingblock">
<div class="title">Initialization with listing:</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">.Given `someJson`:
[source,json,e-set=someJson]
----
{ "a" : 1 }
----
Then `someJson` equals [e-eq-json=#someJson]`{ "a" : 1 }`</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Given <code>someJson</code>:</div>
<div class="content">
<pre class="highlight.js highlight"><code e:set="someJson" data-lang="json">{ "a" : 1 }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then <code>someJson</code> equals <code e:eq-json="#someJson" class=" success">{ "a" : 1 }</code></p>
</div>
</div>
</div>
<div class="listingblock">
<div class="title">Hidden set</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">[.when]
Set `hidden` = [e-set=hidden hide]#1#
[.then]
`hidden` equals [e-eq=#hidden]`1`</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph when">
<p>Set <code>hidden</code> = <span class="e-set=hidden hide" e:set="hidden">1</span></p>
</div>
<div class="paragraph then">
<p><code>hidden</code> equals <code e:eq="#hidden" class=" success">1</code></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="e-execute">e-execute</h3>
<div class="paragraph">
<p>Wrapper of <a href="https://concordion.org/instrumenting/java/html/#execute-command">concordion execute command</a></p>
</div>
<div class="listingblock">
<div class="title">Usage</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">The full name [e-execute=#result = split(#TEXT)]_Jane Smith_
will be broken into first name [e-eq=#result.first]_Jane_
and last name [e-eq=#result.second]_Smith_</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>The full name <em e:execute="#result = split(#TEXT)" class="">Jane Smith</em>
will be broken into first name <em e:eq="#result.first" class=" success">Jane</em>
and last name <em e:eq="#result.second" class=" success">Smith</em></p>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note" />
</td>
<td class="content">
<div class="paragraph">
<p>In case, when an input parameter occurs after an output we want to check,
we can solve this problem by putting an execute command on the paragraph.</p>
</div>
<div class="listingblock">
<div class="title">Unusual sentence structures</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">[role=e-execute=#greeting = greetingFor(#firstName)]
The greeting "[e-eq=#greeting]#Hello Bob!#"
should be given to user [e-set=#firstName]#Bob# when he logs in.</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div e:execute="#greeting = greetingFor(#firstName)" class="paragraph">
<p>The greeting "<span e:eq="#greeting" class=" success">Hello Bob!</span>"
should be given to user <span class="e-set=#firstName" e:set="#firstName">Bob</span> when he logs in.</p>
</div>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Execute on table</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">[.given]
Variable `someVar` = [e-set=someVar]`123`

[.then]
.Lowercase test
[%header, cols="1,1,2,2,3,3", e-execute="#r = lowercase(#param)"]
|===
|[e-set=param]#Param#
|[e-eq=#r.text]#Text#
|[e-eq-json=#r.json]#JSON#
|[e-eq-xml=#r.xml]#XML#
|[e-echo=#r.json]#Echo JSON#
|[e-echo=#r.xml]#Echo XML#

|[.json]`ABC {{someVar}}`
|abc {{someVar}}
|[.json]`{"result": "abc {{someVar}}"}`
|[.xml]`&lt;result&gt;abc {{someVar}}&lt;/result&gt;`
|[pre language-json details]`{empty}`
|[pre language-xml]`{empty}`

|aBc {{someVar}}
|abc {{someVar}}
|[.json]`{"result": "abc {{someVar}}"}`
|[.xml]`&lt;result&gt;abc {{someVar}}&lt;/result&gt;`
|[pre language-json]`{empty}`
|[pre language-xml details]`{empty}`
|===</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph given">
<p>Variable <code>someVar</code> = <code class="e-set=someVar" e:set="someVar">123</code></p>
</div>
<table e:execute="#r = lowercase(#param)" class="tableblock frame-all grid-all stretch then">
<caption class="title">Table 1. Lowercase test</caption>
<colgroup>
<col style="width: 8.3333%;" />
<col style="width: 8.3333%;" />
<col style="width: 16.6666%;" />
<col style="width: 16.6666%;" />
<col style="width: 25%;" />
<col style="width: 25.0002%;" />
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" e:set="param"><span class="e-set=param">Param</span></th>
<th class="tableblock halign-left valign-top" e:eq="#r.text"><span class="">Text</span></th>
<th class="tableblock halign-left valign-top" e:eq-json="#r.json"><span class="">JSON</span></th>
<th class="tableblock halign-left valign-top" e:eq-xml="#r.xml"><span class="">XML</span></th>
<th class="tableblock halign-left valign-top" e:echo="#r.json"><span class="">Echo JSON</span></th>
<th class="tableblock halign-left valign-top" e:echo="#r.xml"><span class="">Echo XML</span></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="json">ABC 123</code></p></td>
<td class="tableblock halign-left valign-top success"><p class="tableblock">abc 123</p></td>
<td class="tableblock halign-left valign-top success"><p class="tableblock"><code class="json">{"result": "abc 123"}</code></p></td>
<td class="tableblock halign-left valign-top success"><p class="tableblock"><code class="xml">&lt;result&gt;abc 123&lt;/result&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="pre language-json details" />{ "result": "abc 123" }</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="pre language-xml" />&lt;result&gt;abc 123&lt;/result&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">aBc 123</p></td>
<td class="tableblock halign-left valign-top success"><p class="tableblock">abc 123</p></td>
<td class="tableblock halign-left valign-top success"><p class="tableblock"><code class="json">{"result": "abc 123"}</code></p></td>
<td class="tableblock halign-left valign-top success"><p class="tableblock"><code class="xml">&lt;result&gt;abc 123&lt;/result&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="pre language-json" />{ "result": "abc 123" }</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="pre language-xml details" />&lt;result&gt;abc 123&lt;/result&gt;</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="listingblock">
<div class="title">Checking emptiness:</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">.Empty string test
[e-execute="#result = getEmptyString()"]
,===
[e-eq=#result]#Text#, [e-eq-json=#result]#JSON#, [e-eq-xml=#result]#XML#

,,
,===</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<table e:execute="#result = getEmptyString()" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Empty string test</caption>
<colgroup>
<col style="width: 33.3333%;" />
<col style="width: 33.3333%;" />
<col style="width: 33.3334%;" />
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" e:eq="#result"><span class="">Text</span></th>
<th class="tableblock halign-left valign-top" e:eq-json="#result"><span class="">JSON</span></th>
<th class="tableblock halign-left valign-top" e:eq-xml="#result"><span class="">XML</span></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top success"> </td>
<td class="tableblock halign-left valign-top success"> </td>
<td class="tableblock halign-left valign-top success"> </td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="e-verify-rows">e-verify-rows</h3>
<div class="paragraph">
<p>Wrapper of <a href="https://concordion.org/instrumenting/java/html/#verify-rows-command">concordion verify-rows command</a></p>
</div>
<div class="listingblock">
<div class="title">Usage</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">.Set up users
[e-execute=setUpUser(#TEXT)]
1. john.lennon
2. ringo.starr

.Add more users
[e-execute=setUpUser(#TEXT)]
- george.harrison
- paul.mccartney

Searching for [e-set=searchString]*arr* will return:

.Search result
[e-verify-rows="#username : search(#searchString)", e-match-strategy=BestMatch]
,===
[e-eq=#username]#Matching Usernames#

george.harrison
ringo.starr
,===</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="olist arabic">
<div class="title">Set up users</div>
<ol e:execute="setUpUser(#TEXT)" class="arabic">
<li><p>john.lennon</p></li>
<li><p>ringo.starr</p></li>
</ol>
</div>
<div class="ulist">
<div class="title">Add more users</div>
<ul e:execute="setUpUser(#TEXT)">
<li><p>george.harrison</p></li>
<li><p>paul.mccartney</p></li>
</ul>
</div>
<div class="paragraph">
<p>Searching for <strong class="e-set=searchString" e:set="searchString">arr</strong> will return:</p>
</div>
<table e:match-strategy="BestMatch" e:verify-rows="#username : search(#searchString)" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Search result</caption>
<colgroup>
<col style="width: 100%;" />
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" e:eq="#username"><span class="">Matching Usernames</span></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top success"><p class="tableblock">george.harrison</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top success"><p class="tableblock">ringo.starr</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="e-run">e-run</h3>
<div class="listingblock">
<div class="title">Usage</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">link:Nested.adoc[Some nested spec, role=e-run]</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><a c:run="concordion" href="Nested.html" class="e-run success">Some nested spec</a></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="e-echo">e-echo</h3>
<div class="listingblock">
<div class="title">Usage</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">Echo _firstName_: [e-echo=#firstName]_{empty}_</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Echo <em>firstName</em>: <em e:echo="#firstName" class="">Bob</em></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="e-example">example command</h3>
<div class="paragraph">
<p>Asciidoc <strong>named</strong> examples interpreted as <a href="https://concordion.org/instrumenting/java/html/#example-command">Concordion examples</a>.</p>
</div>
<div class="paragraph">
<p>Sidebar with id <code>before</code> transformed to <em>“before” examples</em> command.</p>
</div>
<div class="listingblock">
<div class="title">Usage</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">[#before]
.Before each example
****
[.given]
Split the full name [c-execute=#result = split(#TEXT)]_Jane Smith_
****

.Dummy
====
Result contains first name [c-assert-equals=#result.first]_Jane_
and last name [c-assert-equals=#result.second]_Smith_
====

[.ExpectedToFail]
.Dummy
====

[.when]
Wrong expectations

[.then]
Result contains first name [c-assert-equals=#result.first]_Wrong_
and last name [c-assert-equals=#result.second]_Wrong_

====</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="sidebarblock" c:example="before" id="before"><p></p><p></p><p></p>
<div class="content">
<div class="title">Before each example</div>
<div class="paragraph given">
<p>Split the full name <em c:execute="#result = split(#TEXT)" class="">Jane Smith</em></p>
</div>
</div>
</div>
<div c:example="Example 1. Dummy" c:status="ExpectedToPass" class="exampleblock exam-example mb-3" data-type="example" id="Example 1. Dummy" data-summary-success="2" data-summary-ignore="0" data-summary-failure="0" data-summary-exception="0" data-summary-status="ExpectedToPass"><div data-bs-toggle="collapse" data-bs-target="#eb360415e-d47e-406e-9f34-adbccbf0fb64" aria-expanded="true"><h4 style="visibility: hidden; height:0;" class="test-class"><span class="success">Example 1. Dummy</span></h4><i class="far fa-caret-square-down"></i><span> </span><a class="bd-example-title text-muted fw-lighter collapsed">Example 1. Dummy</a></div><div id="eb360415e-d47e-406e-9f34-adbccbf0fb64" class="bd-example collapse rounded bg-light bg-gradient">

<div class="content">
<div class="paragraph">
<p>Result contains first name <em c:assert-equals="#result.first" class=" success">Jane</em>
and last name <em c:assert-equals="#result.second" class=" success">Smith</em></p>
</div>
</div>
</div></div>
<div c:example="Example 2. Dummy" c:status="ExpectedToFail" class="exampleblock ExpectedToFail exam-example mb-3" data-type="example" id="Example 2. Dummy" data-summary-success="0" data-summary-ignore="0" data-summary-failure="2" data-summary-exception="0" data-summary-status="ExpectedToFail"><div data-bs-toggle="collapse" data-bs-target="#e1b3399d0-ec74-4215-9cf6-7dad9ed89460" aria-expanded="true"><h4 style="visibility: hidden; height:0;" class="test-class"><span class="badge bg-warning me-1 ms-1">!</span><span class="failure">Example 2. Dummy</span></h4><i class="far fa-caret-square-down"></i><span> </span><a class="bd-example-title text-muted fw-lighter">Example 2. Dummy</a><span class="badge bg-warning me-1 ms-1">ExpectedToFail</span></div><div class="bd-example collapse show rounded bg-light bg-gradient" id="e1b3399d0-ec74-4215-9cf6-7dad9ed89460">

<div class="content">
<div class="paragraph when">
<p>Wrong expectations</p>
</div>
<div class="paragraph then">
<p>Result contains first name <em c:assert-equals="#result.first" class=" failure"><del class="expected">Wrong</del>
<ins class="actual">Jane</ins></em>
and last name <em c:assert-equals="#result.second" class=" failure"><del class="expected">Wrong</del>
<ins class="actual">Smith</ins></em></p>
</div>
</div>
</div></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="handlebars">Handlebar support</h3>
<div class="paragraph">
<p><a href="https://github.com/jknack/handlebars.java">The Handlebars templates</a> may be used for templating values in Exam commands.</p>
</div>
<div class="paragraph">
<p>Exam provides following built-in <a href="https://github.com/jknack/handlebars.java#helpers">helpers</a> groups:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Date helpers</dt>
<dd>
<p><code c:echo="dateHelpers" class="pre language-handlebars">{{at '-2d'}} will produce: object of class java.util.Date = "Tue Jan 16 23:15:05 MSK 2024" 
{{now "yyyy-MM-dd'T'HH:mm:ss" tz="GMT+3" minus="1 y, 2 months, d 3" plus="4 h, 5 min, 6 s"}} will produce: object of class java.util.Date = "Wed Nov 16 03:20:11 MSK 2022" 
{{today "yyyy-MM-dd" minus="1 y, 2 months, d 3"}} will produce: "2022-11-15" 
{{date '01.02.2000 10:20' format="dd.MM.yyyy HH:mm" minus="1 h" plus="1 h"}} will produce: object of class java.util.Date = "Tue Feb 01 10:20:00 MSK 2000" 
{{weeksAgo 2}} will produce: object of class java.util.Date = "Thu Jan 04 00:00:00 MSK 2024" 
{{daysAgo 2}} will produce: object of class java.util.Date = "Tue Jan 16 00:00:00 MSK 2024" 
{{iso date}} will produce: "2000-01-02T10:20:11.123" (given context has variables: {date=Sun Jan 02 10:20:11 MSK 2000})
{{isoDate date}} will produce: "2000-01-02" (given context has variables: {date=Sun Jan 02 10:20:11 MSK 2000})
{{formattedAndWithin 'yyyy-MM-dd' '5s' (today)}} will produce: "${json-unit.matches:formattedAndWithin}yyyy-MM-dd|$|5s|$|2024-01-18T00:00" (given context has variables: {placeholder_type=json})
{{formattedAs "yyyy-MM-dd'T'hh:mm:ss"}} will produce: "${json-unit.matches:formattedAs}yyyy-MM-dd'T'hh:mm:ss" (given context has variables: {placeholder_type=json})
{{after (today)}} will produce: "${json-unit.matches:after}2024-01-18T00:00" (given context has variables: {placeholder_type=json})
{{before (today)}} will produce: "${json-unit.matches:before}2024-01-18T00:00" (given context has variables: {placeholder_type=json})
{{dateFormat date "yyyy-MM-dd'T'HH:mm O" tz="GMT+3"}} will produce: "2000-01-02T10:20 GMT+3" (given context has variables: {date=Sun Jan 02 10:20:00 MSK 2000})</code></p>
</dd>
<dt class="hdlist1">Data matcher helpers</dt>
<dd>
<p><code c:echo="matcherHelpers" class="pre language-handlebars">{{string}} will produce: "${json-unit.any-string}" (given context has variables: {placeholder_type=json})
{{number}} will produce: "${json-unit.any-number}" (given context has variables: {placeholder_type=json})
{{bool}} will produce: "${json-unit.any-boolean}" (given context has variables: {placeholder_type=json})
{{ignore}} will produce: "${json-unit.ignore}" (given context has variables: {placeholder_type=json})
{{regex '\d+'}} will produce: "${json-unit.regex}\d+" (given context has variables: {placeholder_type=json})
{{matches 'name' 'params'}} will produce: "${json-unit.matches:name}params" (given context has variables: {placeholder_type=json})</code></p>
</dd>
<dt class="hdlist1">Misc helpers</dt>
<dd>
<p><code c:echo="miscHelpers" class="pre language-handlebars">{{vars v1='a' v2=2}} will produce: "" 
{{set 1 "someVar"}} will produce: object of class java.lang.Integer = "1" 
{{coalesce var1 var2 "default value"}} will produce: "default value" 
{{map key='value'}} will produce: object of class java.util.Collections$SingletonMap = "{key=value}" 
{{ls '1' '2'}} will produce: object of class java.util.Arrays$ArrayList = "[1, 2]" 
{{json (map f1='1' f2=(ls '1' '2'))}} will produce: "{"f1":"1","f2":["1","2"]}" 
{{prettyJson '{"a": 1}'}} will produce: "{
  "a": 1
}" 
{{NULL}} will produce: null 
{{exist obj}} will produce: object of class java.lang.Boolean = "true" (given context has variables: {obj=any})
{{eval '#var'}} will produce: object of class java.lang.Integer = "2" (given context has variables: {var=2})
{{resolve 'today is {{today}}' var='val'}} will produce: "today is Thu Jan 18 00:00:00 MSK 2024" 
{{file '/hb/some-file.txt' var1='val1' var2='val2'}} will produce: "today is Thu Jan 18 00:00:00 MSK 2024" 
{{jsonPath '{"root": {"nested": 1}}' '$.root.nested'}} will produce: object of class java.lang.Integer = "1" 
{{prop 'system.property' 'optional default'}} will produce: "optional default" 
{{env 'env.property' 'optional default'}} will produce: "optional default" </code></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="title">Data types matchers:</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">[.given]
.`dataJson`:
[source,json,e-set=dataJson]
{
  "string": "some string",
  "number": 123,
  "bool": true,
  "ignore": "anything 123",
  "regex": "123"
}

[.then]
.`dataJson` matches:
[source,json,e-eq-json=#dataJson]
{
  "string": "{{string}}",
  "number": "{{number}}",
  "bool": "{{bool}}",
  "ignore": "{{ignore}}",
  "regex": "{{regex '\\d+'}}"
}</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock given">
<div class="title"><code>dataJson</code>:</div>
<div class="content">
<pre class="highlight.js highlight"><code e:set="dataJson" data-lang="json">{
  "string": "some string",
  "number": 123,
  "bool": true,
  "ignore": "anything 123",
  "regex": "123"
}</code></pre>
</div>
</div>
<div class="listingblock then">
<div class="title"><code>dataJson</code> matches:</div>
<div class="content">
<pre class="highlight.js highlight"><code e:eq-json="#dataJson" data-lang="json" class="success">{
  "string": "${json-unit.any-string}",
  "number": "${json-unit.any-number}",
  "bool": "${json-unit.any-boolean}",
  "ignore": "${json-unit.ignore}",
  "regex": "${json-unit.regex}\\d+"
}</code></pre>
</div>
</div>
</div>
</div>
<div class="listingblock">
<div class="title">Date/time matchers:</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">[.given]
.`dtJson`:
[source,json,e-set=dtJson]
--
{
  "customFormat": "{{dateFormat (at) "yyyy/MM/dd'T'HH:mm.ss"}}",
  "isoDate": "{{isoDate (at)}}",
  "iso": "{{iso (at)}}",

  "customFormatAndWithinNow": "{{dateFormat (at) "yyyy/MM/dd'T'HH:mm.ss"}}",
  "isoDateAndWithinNow": "{{isoDate (at)}}",
  "isoAndWithinNow": "{{iso (at)}}",

  "customFormatAndWithinSpecifiedDate": "{{dateFormat (at) "yyyy/MM/dd'T'HH:mm.ss"}}",
  "isoDateAndWithinSpecifiedDate": "{{isoDate (at)}}",
  "isoAndWithinSpecifiedDate": "{{iso (at)}}",

  "afterSpecifiedDate": "{{iso (at)}}",
  "beforeSpecifiedDate": "{{iso (at)}}"
}
--
[.then]
.`dtJson` matches:
[source,json,e-eq=#dtJson,e-verifier=json]
--
{
"customFormat": "{{formattedAs 'yyyy/MM/dd\'T\'HH:mm.ss'}}",
"isoDate": "{{isoDate}}",
"iso": "{{iso}}",

"customFormatAndWithinNow": "{{formattedAndWithin 'yyyy/MM/dd\'T\'HH:mm.ss' '25s'}}",
"isoDateAndWithinNow": "{{isoDate '1d'}}",
"isoAndWithinNow": "{{iso '25s'}}",

"customFormatAndWithinSpecifiedDate": "{{formattedAndWithin 'yyyy/MM/dd\'T\'HH:mm.ss' '25s' (now)}}",
"isoDateAndWithinSpecifiedDate": "{{isoDate '1d' (now)}}",
"isoAndWithinSpecifiedDate": "{{iso '25s' (now)}}",

"afterSpecifiedDate": "{{after (at '-1h')}}",
"beforeSpecifiedDate": "{{before (at '+1h')}}"
}
--</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock given">
<div class="title"><code>dtJson</code>:</div>
<div class="content">
<pre class="highlight.js highlight"><code e:set="dtJson" data-lang="json">{
  "customFormat": "2024/01/18T23:15.05",
  "isoDate": "2024-01-18",
  "iso": "2024-01-18T23:15:05.351",

  "customFormatAndWithinNow": "2024/01/18T23:15.05",
  "isoDateAndWithinNow": "2024-01-18",
  "isoAndWithinNow": "2024-01-18T23:15:05.351",

  "customFormatAndWithinSpecifiedDate": "2024/01/18T23:15.05",
  "isoDateAndWithinSpecifiedDate": "2024-01-18",
  "isoAndWithinSpecifiedDate": "2024-01-18T23:15:05.351",

  "afterSpecifiedDate": "2024-01-18T23:15:05.351",
  "beforeSpecifiedDate": "2024-01-18T23:15:05.351"
}</code></pre>
</div>
</div>
<div class="listingblock then">
<div class="title"><code>dtJson</code> matches:</div>
<div class="content">
<pre class="highlight.js highlight"><code e:eq="#dtJson" e:verifier="json" data-lang="json" class="success">{
"customFormat": "${json-unit.matches:formattedAs}yyyy/MM/dd'T'HH:mm.ss",
"isoDate": "${json-unit.matches:formattedAs}yyyy-MM-dd",
"iso": "${json-unit.matches:formattedAs}ISO_LOCAL",

"customFormatAndWithinNow": "${json-unit.matches:formattedAndWithin}yyyy/MM/dd'T'HH:mm.ss|$|25s|$|2024-01-18T23:15:14.036",
"isoDateAndWithinNow": "${json-unit.matches:formattedAndWithin}yyyy-MM-dd|$|1d|$|2024-01-18",
"isoAndWithinNow": "${json-unit.matches:formattedAndWithin}ISO_LOCAL|$|25s|$|2024-01-18T23:15:14.037",

"customFormatAndWithinSpecifiedDate": "${json-unit.matches:formattedAndWithin}yyyy/MM/dd'T'HH:mm.ss|$|25s|$|2024-01-18T23:15:14.037",
"isoDateAndWithinSpecifiedDate": "${json-unit.matches:formattedAndWithin}yyyy-MM-dd|$|1d|$|2024-01-18",
"isoAndWithinSpecifiedDate": "${json-unit.matches:formattedAndWithin}ISO_LOCAL|$|25s|$|2024-01-18T23:15:14.037",

"afterSpecifiedDate": "${json-unit.matches:after}2024-01-18T22:15:05.351",
"beforeSpecifiedDate": "${json-unit.matches:before}2024-01-19T00:15:05.351"
}</code></pre>
</div>
</div>
</div>
</div>
<hr />
</div>
</div>
</div>
<div class="sect1">
<h2 id="_web_service_plugin">Web Service plugin</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>WsPlugin</code> enables to document <em>REST/SOAP API</em>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/ws.png" alt="ws" width="302" height="205" />
</div>
</div>
<div class="listingblock">
<div class="title">Dependency</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="groovy">testImplementation "io.github.adven27:exam-ws:2024.0.0"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Configuration</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="kotlin">class Specs : AbstractSpecs() {
    override fun init() = ExamExtension(
        WsPlugin(
            host = "localhost",
            port = 8080
        )
    )</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_e_http">e-http</h3>
<div class="paragraph">
<p>Check HTTP interaction</p>
</div>
<div class="hdlist">
<div class="title">Attributes</div>
<table>
<tr>
<td class="hdlist1">
<code>awaitAtMostSec</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: 4.</em></p>
<div class="paragraph">
<p>How long to wait in seconds before failing the verification</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>awaitPollDelayMillis</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: 0.</em></p>
<div class="paragraph">
<p>How long to wait in millis before starting verification</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>awaitPollIntervalMillis</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: 1000.</em></p>
<div class="paragraph">
<p>How long to wait in millis between verification attempts</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important" />
</td>
<td class="content">
<strong>Waiting is disabled by default</strong>. Check will fail immediately in case of mismatch unless at least one of the
<code>awaitAtMostSec</code>, <code>awaitPollDelayMillis</code> or <code>awaitPollIntervalMillis</code> attributes are set.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Usage</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">.HTTP API check
[e-http=]
--
.Given request:
[source,httprequest]
----
GET /mirror/headers
Content-Type: application/json
Authorization: token
Accept-Language: ru
Cookie: cookie1=c1; cookie2=c2
----

.Expected response:
[source,httprequest]
----
200 OK
Content-Type: application/json

{
  "GET": "/mirror/headers",
  "Authorization": "token",
  "Accept-Language": "ru",
  "cookies": {
    "cookie1": "c1",
    "cookie2": "c2"
  }
}
----
--</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="openblock">
<div class="title">HTTP API check</div>
<div class="content" e:http="" rendered="true">
<div class="listingblock">
<div class="title">Given request:</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="httprequest">GET /mirror/headers HTTP/1.1
Host: localhost:8888
Content-Type: application/json
Authorization: token
Accept-Language: ru
Cookie: cookie1=c1; cookie2=c2

</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Expected response:</div>
<div class="content">

<div>
                <nav>
                  <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active small text-success" type="button" role="tab" id="nav-et-1705608914461-tab" data-bs-toggle="tab" data-bs-target="#nav-et-1705608914461" aria-controls="nav-et-1705608914461" aria-selected="true">Expected</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link small" type="button" role="tab" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" id="nav-at-1705608914461-tab" data-bs-toggle="tab" data-bs-target="#nav-at-1705608914461" aria-controls="nav-at-1705608914461" aria-selected="false">Actual</button>
                    </li>
                  </ul>
                </nav>
                <div class="tab-content">
                  <div class="tab-pane fade show active" id="nav-et-1705608914461" role="tabpanel" aria-labelledby="nav-et-1705608914461-tab"><pre class="highlight.js highlight success"><code data-lang="httprequest">HTTP/1.1 200 OK
Content-Type: application/json

{
  "GET": "/mirror/headers",
  "Authorization": "token",
  "Accept-Language": "ru",
  "cookies": {
    "cookie1": "c1",
    "cookie2": "c2"
  }
}</code></pre></div>
                  <div class="tab-pane fade" id="nav-at-1705608914461" role="tabpanel" aria-labelledby="nav-at-1705608914461-tab"><pre class="highlight.js highlight success success"><code data-lang="httprequest">HTTP/1.1 200 OK
Content-Type: application/json
transfer-encoding: chunked

{
  "GET": "/mirror/headers",
  "Authorization": "token",
  "Accept-Language": "ru",
  "cookies": {
    "cookie1": "c1",
    "cookie2": "c2"
  }
}</code></pre></div>
                </div>
            </div></div>
</div>
</div>
</div>
</div>
</div>
<div class="listingblock">
<div class="title">SOAP</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">.SOAP in collapsible blocks
[e-http=]
--
.SOAP request
[%collapsible]
=====
[source,httprequest]
----
POST /mirror/soap
Content-Type: application/soap+xml

&lt;soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"&gt;
    &lt;soap:Body&gt;
        &lt;ns2:getItemRequest xmlns:ns2="http://ws.io"&gt;
            &lt;date&gt;{{iso (at)}}&lt;/date&gt;
        &lt;/ns2:getItemRequest&gt;
    &lt;/soap:Body&gt;
&lt;/soap:Envelope&gt;
----
=====

.SOAP response
[%collapsible]
=====
[source,httprequest]
----
200

&lt;soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"&gt;
    &lt;soap:Body&gt;
        &lt;ns2:getItemRequest xmlns:ns2="http://ws.io"&gt;
            &lt;date&gt;{{iso (at)}}&lt;/date&gt;
        &lt;/ns2:getItemRequest&gt;
    &lt;/soap:Body&gt;
&lt;/soap:Envelope&gt;
----
=====
--</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="openblock">
<div class="title">SOAP in collapsible blocks</div>
<div class="content" e:http="" rendered="true">
<details>
<summary class="title">SOAP request</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight.js highlight"><code data-lang="httprequest">POST /mirror/soap HTTP/1.1
Host: localhost:8888
Content-Type: application/soap+xml
Content-Length: 259

&lt;soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"&gt;&#x0D;
  &lt;soap:Body&gt;&#x0D;
    &lt;ns2:getItemRequest xmlns:ns2="http://ws.io"&gt;&#x0D;
      &lt;date&gt;2024-01-18T23:15:05.351&lt;/date&gt;&#x0D;
    &lt;/ns2:getItemRequest&gt;&#x0D;
  &lt;/soap:Body&gt;&#x0D;
&lt;/soap:Envelope&gt;</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">SOAP response</summary>
<div class="content">
<div class="listingblock">
<div class="content">

<div>
                <nav>
                  <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active small text-success" type="button" role="tab" id="nav-et-1705608914556-tab" data-bs-toggle="tab" data-bs-target="#nav-et-1705608914556" aria-controls="nav-et-1705608914556" aria-selected="true">Expected</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link small" type="button" role="tab" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" id="nav-at-1705608914556-tab" data-bs-toggle="tab" data-bs-target="#nav-at-1705608914556" aria-controls="nav-at-1705608914556" aria-selected="false">Actual</button>
                    </li>
                  </ul>
                </nav>
                <div class="tab-content">
                  <div class="tab-pane fade show active" id="nav-et-1705608914556" role="tabpanel" aria-labelledby="nav-et-1705608914556-tab"><pre class="highlight.js highlight success"><code data-lang="httprequest">HTTP/1.1 200 

&lt;soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"&gt;
    &lt;soap:Body&gt;
        &lt;ns2:getItemRequest xmlns:ns2="http://ws.io"&gt;
            &lt;date&gt;2024-01-18T23:15:05.351&lt;/date&gt;
        &lt;/ns2:getItemRequest&gt;
    &lt;/soap:Body&gt;
&lt;/soap:Envelope&gt;</code></pre></div>
                  <div class="tab-pane fade" id="nav-at-1705608914556" role="tabpanel" aria-labelledby="nav-at-1705608914556-tab"><pre class="highlight.js highlight success success"><code data-lang="httprequest">HTTP/1.1 200 OK
Content-Length: 259
Content-Type: application/soap+xml; charset=utf-8

&lt;soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"&gt;&#x0D;
  &lt;soap:Body&gt;&#x0D;
    &lt;ns2:getItemRequest xmlns:ns2="http://ws.io"&gt;&#x0D;
      &lt;date&gt;2024-01-18T23:15:05.351&lt;/date&gt;&#x0D;
    &lt;/ns2:getItemRequest&gt;&#x0D;
  &lt;/soap:Body&gt;&#x0D;
&lt;/soap:Envelope&gt;</code></pre></div>
                </div>
            </div></div>
</div>
</div>
</details>
</div>
</div>
</div>
</div>
<div class="listingblock">
<div class="title">Data-driven check</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">.Data-driven check
[e-http=, awaitAtMostSec=4]
--
.Request
[source,httprequest]
----
{{file req}}
----
.Response
[source,httprequest]
----
{{file resp}}
----

[.where]
,===
,req, resp

GET, /data/ws/get.http, /data/ws/get-resp.http
POST, /data/ws/post.http, /data/ws/post-resp.http
PUT, /data/ws/put.http, /data/ws/put-resp.http
DELETE, /data/ws/delete.http, /data/ws/delete-resp.http
,===
--</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="openblock">
<div class="title">Data-driven check</div>
<div class="content" e:http="" rendered="true">


<div><nav><ul class="nav nav-tabs" role="tablist"><li class="nav-item"><button id="nav-1705608914627-1705608914624-tab" data-bs-toggle="tab" data-bs-target="#nav-1705608914627-1705608914624" role="tab" aria-controls="nav-1705608914627-1705608914624" aria-selected="false" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" class="nav-link small text-success  active show">GET</button></li><li class="nav-item"><button id="nav-1705608914632-1705608914629-tab" class="nav-link small text-success " data-bs-toggle="tab" data-bs-target="#nav-1705608914632-1705608914629" role="tab" aria-controls="nav-1705608914632-1705608914629" aria-selected="false" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)">POST</button></li><li class="nav-item"><button id="nav-1705608914634-1705608914632-tab" class="nav-link small text-success " data-bs-toggle="tab" data-bs-target="#nav-1705608914634-1705608914632" role="tab" aria-controls="nav-1705608914634-1705608914632" aria-selected="false" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)">PUT</button></li><li class="nav-item"><button id="nav-1705608914636-1705608914634-tab" class="nav-link small text-success " data-bs-toggle="tab" data-bs-target="#nav-1705608914636-1705608914634" role="tab" aria-controls="nav-1705608914636-1705608914634" aria-selected="false" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)">DELETE</button></li></ul></nav><div><div class="tab-content"><div id="nav-1705608914627-1705608914624" role="tabpanel" aria-labelledby="nav-1705608914627-1705608914624-tab" class="tab-pane fade active show"><div><div class="listingblock">
<div class="title">Request</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="httprequest">GET /mirror/request HTTP/1.1
Host: localhost:8888
Content-Type: application/json

</code></pre>
</div>
</div><div class="listingblock">
<div class="title">Response</div>
<div class="content">

<div>
                <nav>
                  <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active small text-success" type="button" role="tab" id="nav-et-1705608914624-tab" data-bs-toggle="tab" data-bs-target="#nav-et-1705608914624" aria-controls="nav-et-1705608914624" aria-selected="true">Expected</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link small" type="button" role="tab" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" id="nav-at-1705608914624-tab" data-bs-toggle="tab" data-bs-target="#nav-at-1705608914624" aria-controls="nav-at-1705608914624" aria-selected="false">Actual</button>
                    </li>
                  </ul>
                </nav>
                <div class="tab-content">
                  <div class="tab-pane fade show active" id="nav-et-1705608914624" role="tabpanel" aria-labelledby="nav-et-1705608914624-tab"><pre class="highlight.js highlight success"><code data-lang="httprequest">HTTP/1.1 200 OK
Content-Type: application/json

{
  "GET": "/mirror/request"
}</code></pre></div>
                  <div class="tab-pane fade" id="nav-at-1705608914624" role="tabpanel" aria-labelledby="nav-at-1705608914624-tab"><pre class="highlight.js highlight success success"><code data-lang="httprequest">HTTP/1.1 200 OK
Content-Type: application/json
transfer-encoding: chunked

{
  "GET": "/mirror/request"
}</code></pre></div>
                </div>
            </div></div>
</div></div></div><div class="tab-pane fade" id="nav-1705608914632-1705608914629" role="tabpanel" aria-labelledby="nav-1705608914632-1705608914629-tab"><div><div class="listingblock">
<div class="title">Request</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="httprequest">POST /mirror/request HTTP/1.1
Host: localhost:8888
Content-Type: application/json
Content-Length: 21

{
  "a": "ok",
  "b": 1
}</code></pre>
</div>
</div><div class="listingblock">
<div class="title">Response</div>
<div class="content">

<div>
                <nav>
                  <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active small text-success" type="button" role="tab" id="nav-et-1705608914629-tab" data-bs-toggle="tab" data-bs-target="#nav-et-1705608914629" aria-controls="nav-et-1705608914629" aria-selected="true">Expected</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link small" type="button" role="tab" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" id="nav-at-1705608914629-tab" data-bs-toggle="tab" data-bs-target="#nav-at-1705608914629" aria-controls="nav-at-1705608914629" aria-selected="false">Actual</button>
                    </li>
                  </ul>
                </nav>
                <div class="tab-content">
                  <div class="tab-pane fade show active" id="nav-et-1705608914629" role="tabpanel" aria-labelledby="nav-et-1705608914629-tab"><pre class="highlight.js highlight success"><code data-lang="httprequest">HTTP/1.1 200 OK
Content-Type: application/json

{
  "POST": "/mirror/request?p=1",
  "body": {
    "a": "ok",
    "b": 1
  }
}</code></pre></div>
                  <div class="tab-pane fade" id="nav-at-1705608914629" role="tabpanel" aria-labelledby="nav-at-1705608914629-tab"><pre class="highlight.js highlight success success"><code data-lang="httprequest">HTTP/1.1 200 OK
Content-Type: application/json
transfer-encoding: chunked

{
  "POST": "/mirror/request?p=1",
  "body": {
    "a": "ok",
    "b": 1
  }
}</code></pre></div>
                </div>
            </div></div>
</div></div></div><div class="tab-pane fade" id="nav-1705608914634-1705608914632" role="tabpanel" aria-labelledby="nav-1705608914634-1705608914632-tab"><div><div class="listingblock">
<div class="title">Request</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="httprequest">PUT /mirror/request HTTP/1.1
Host: localhost:8888
Content-Type: application/json
Content-Length: 21

{
  "a": "ok",
  "b": 1
}</code></pre>
</div>
</div><div class="listingblock">
<div class="title">Response</div>
<div class="content">

<div>
                <nav>
                  <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active small text-success" type="button" role="tab" id="nav-et-1705608914632-tab" data-bs-toggle="tab" data-bs-target="#nav-et-1705608914632" aria-controls="nav-et-1705608914632" aria-selected="true">Expected</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link small" type="button" role="tab" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" id="nav-at-1705608914632-tab" data-bs-toggle="tab" data-bs-target="#nav-at-1705608914632" aria-controls="nav-at-1705608914632" aria-selected="false">Actual</button>
                    </li>
                  </ul>
                </nav>
                <div class="tab-content">
                  <div class="tab-pane fade show active" id="nav-et-1705608914632" role="tabpanel" aria-labelledby="nav-et-1705608914632-tab"><pre class="highlight.js highlight success"><code data-lang="httprequest">HTTP/1.1 200 OK
Content-Type: application/json

{
  "PUT": "/mirror/request?p=1",
  "body": {
    "a": "ok",
    "b": 1
  }
}</code></pre></div>
                  <div class="tab-pane fade" id="nav-at-1705608914632" role="tabpanel" aria-labelledby="nav-at-1705608914632-tab"><pre class="highlight.js highlight success success"><code data-lang="httprequest">HTTP/1.1 200 OK
Content-Type: application/json
transfer-encoding: chunked

{
  "PUT": "/mirror/request?p=1",
  "body": {
    "a": "ok",
    "b": 1
  }
}</code></pre></div>
                </div>
            </div></div>
</div></div></div><div class="tab-pane fade" id="nav-1705608914636-1705608914634" role="tabpanel" aria-labelledby="nav-1705608914636-1705608914634-tab"><div><div class="listingblock">
<div class="title">Request</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="httprequest">DELETE /mirror/request HTTP/1.1
Host: localhost:8888
Content-Type: application/json

</code></pre>
</div>
</div><div class="listingblock">
<div class="title">Response</div>
<div class="content">

<div>
                <nav>
                  <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active small text-success" type="button" role="tab" id="nav-et-1705608914634-tab" data-bs-toggle="tab" data-bs-target="#nav-et-1705608914634" aria-controls="nav-et-1705608914634" aria-selected="true">Expected</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link small" type="button" role="tab" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" id="nav-at-1705608914634-tab" data-bs-toggle="tab" data-bs-target="#nav-at-1705608914634" aria-controls="nav-at-1705608914634" aria-selected="false">Actual</button>
                    </li>
                  </ul>
                </nav>
                <div class="tab-content">
                  <div class="tab-pane fade show active" id="nav-et-1705608914634" role="tabpanel" aria-labelledby="nav-et-1705608914634-tab"><pre class="highlight.js highlight success"><code data-lang="httprequest">HTTP/1.1 200 OK
Content-Type: application/json

{
  "DELETE": "/mirror/request"
}</code></pre></div>
                  <div class="tab-pane fade" id="nav-at-1705608914634" role="tabpanel" aria-labelledby="nav-at-1705608914634-tab"><pre class="highlight.js highlight success success"><code data-lang="httprequest">HTTP/1.1 200 OK
Content-Type: application/json
transfer-encoding: chunked

{
  "DELETE": "/mirror/request"
}</code></pre></div>
                </div>
            </div></div>
</div></div></div></div></div></div>
</div>
</div>
</div>
</div>
<div class="listingblock">
<div class="title">Put interactions to variable</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">.Put interactions to variable
[source,httprequest,e-http=interactions]
----
GET /mirror/request
Content-Type: application/json
----

.Check interactions
[%header,cols="4,4,1,1",c-verify-rows="#i : #interactions"]
|===
|[e-eq=#i.req.raw]#Request#
|[e-verifier=jsonIgnoreExtraFields e-eq=#i.resp.body]#Response#
|[e-eq=#i.resp.statusCode]#Status#
|[e-eq=#i.resp.statusPhrase]#Phrase#

|[pre language-http]`GET /mirror/request HTTP/1.1
Host: localhost:8888
Content-Type: application/json
{blank}
{blank}`
|[pre language-json]`{}`
|200
|OK
|===</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Put interactions to variable</div>
<div class="content">
<pre class="highlight.js highlight"><code e:http="interactions" data-lang="httprequest">GET /mirror/request HTTP/1.1
Host: localhost:8888
Content-Type: application/json

</code></pre>
</div>
</div>
<table c:verify-rows="#i : #interactions" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Check interactions</caption>
<colgroup>
<col style="width: 40%;" />
<col style="width: 40%;" />
<col style="width: 10%;" />
<col style="width: 10%;" />
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" e:eq="#i.req.raw"><span class="">Request</span></th>
<th class="tableblock halign-left valign-top" e:eq="#i.resp.body" e:verifier="jsonIgnoreExtraFields"><span class="">Response</span></th>
<th class="tableblock halign-left valign-top" e:eq="#i.resp.statusCode"><span class="">Status</span></th>
<th class="tableblock halign-left valign-top" e:eq="#i.resp.statusPhrase"><span class="">Phrase</span></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top success"><p class="tableblock"><code class="pre language-http">GET /mirror/request HTTP/1.1
Host: localhost:8888
Content-Type: application/json

</code></p></td>
<td class="tableblock halign-left valign-top success"><p class="tableblock"><code class="pre language-json">{}</code></p></td>
<td class="tableblock halign-left valign-top success"><p class="tableblock">200</p></td>
<td class="tableblock halign-left valign-top success"><p class="tableblock">OK</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="listingblock">
<div class="title">Custom content type verifier</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="kotlin">import io.github.adven27.concordion.extensions.exam.core.AbstractSpecs
import io.github.adven27.concordion.extensions.exam.core.ExamExtension
import io.github.adven27.concordion.extensions.exam.core.JsonVerifier
import net.javacrumbs.jsonunit.core.Option.IGNORING_EXTRA_FIELDS

class Specs : AbstractSpecs() {

    override fun init() = ExamExtension(
        //...
    ).withVerifiers(
        mapOf("jsonIgnoreExtraFields" to JsonVerifier { it.withOptions(IGNORING_EXTRA_FIELDS) })
    )
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Use custom content verifier</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">.Custom content type verifier
[e-http=]
--
[source,httprequest]
----
POST /mirror/request
Content-Type: application/json

{}
----

.Check with registered `jsonIgnoreExtraFields` verifier
[source,httprequest,e-verifier=jsonIgnoreExtraFields]
----
200 OK
Content-Type: application/json

{ "POST": "/mirror/request" }
----
--</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="openblock">
<div class="title">Custom content type verifier</div>
<div class="content" e:http="" rendered="true">
<div class="listingblock">
<div class="content">
<pre class="highlight.js highlight"><code data-lang="httprequest">POST /mirror/request HTTP/1.1
Host: localhost:8888
Content-Type: application/json
Content-Length: 2

{}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Check with registered <code>jsonIgnoreExtraFields</code> verifier</div>
<div class="content">

<div>
                <nav>
                  <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active small text-success" type="button" role="tab" id="nav-et-1705608914663-tab" data-bs-toggle="tab" data-bs-target="#nav-et-1705608914663" aria-controls="nav-et-1705608914663" aria-selected="true">Expected</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link small" type="button" role="tab" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" id="nav-at-1705608914663-tab" data-bs-toggle="tab" data-bs-target="#nav-at-1705608914663" aria-controls="nav-at-1705608914663" aria-selected="false">Actual</button>
                    </li>
                  </ul>
                </nav>
                <div class="tab-content">
                  <div class="tab-pane fade show active" id="nav-et-1705608914663" role="tabpanel" aria-labelledby="nav-et-1705608914663-tab"><pre class="highlight.js highlight success"><code e:verifier="jsonIgnoreExtraFields" data-lang="httprequest">HTTP/1.1 200 OK
Content-Type: application/json

{
  "POST": "/mirror/request"
}</code></pre></div>
                  <div class="tab-pane fade" id="nav-at-1705608914663" role="tabpanel" aria-labelledby="nav-at-1705608914663-tab"><pre class="highlight.js highlight success success"><code e:verifier="jsonIgnoreExtraFields" data-lang="httprequest">HTTP/1.1 200 OK
Content-Type: application/json
transfer-encoding: chunked

{
  "POST": "/mirror/request",
  "body": {}
}</code></pre></div>
                </div>
            </div></div>
</div>
</div>
</div>
</div>
</div>
<hr />
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sql_database_plugin">SQL Database plugin</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>DbPlugin</code> is a wrapper around <a href="http://dbunit.sourceforge.net">DbUnit</a> library that enables setting up and verification of database.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/db.png" alt="db" width="302" height="205" />
</div>
<div class="title">Figure 3. Exam integration with database</div>
</div>
<div class="listingblock">
<div class="title">Dependency</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="groovy">testImplementation "io.github.adven27:exam-db:2024.0.0"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Configuration</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="java">public class Specs extends AbstractSpecs {
    @Override
    protected ExamExtension init() {
        return new ExamExtension(
            new DbPlugin(
                "org.postgresql.Driver",                     // driver class
                "jdbc:postgresql://localhost:5432/postgres", // jdbc url
                "postgres",                                  // user
                "postgres"                                   // password
            )
        );
    }
}</code></pre>
</div>
</div>
<div class="ulist unstyled">
<div class="title">Commands</div>
<ul class="unstyled">
<li>
<p><code><a href="#e-db-set">e-db-set</a></code></p>
</li>
<li>
<p><code><a href="#e-db-check">e-db-check</a></code></p>
</li>
<li>
<p><code><a href="#e-db-clean">e-db-clean</a></code></p>
</li>
<li>
<p><code><a href="#e-db-execute">e-db-execute</a></code></p>
</li>
<li>
<p><code><a href="#e-db-verify">e-db-verify</a></code></p>
</li>
<li>
<p><code><a href="#e-db-show">e-db-show</a></code></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="e-db-set">e-db-set</h3>
<div class="paragraph">
<p>Creates <a href="http://dbunit.sourceforge.net/">DbUnit</a> dataset for specified table and applies it to database.</p>
</div>
<div class="hdlist">
<div class="title">Attributes</div>
<table>
<tr>
<td class="hdlist1">
<code>operation</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: <code>clean_insert</code>.</em></p>
<div class="paragraph">
<p><a href="https://dbunit.sourceforge.net/dbunit/components.html#databaseoperation">DbUnit operation</a></p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>ds</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: <code>default</code>.</em></p>
<div class="paragraph">
<p>Datasource to apply dataset. By default, only 1 datasource with name <code>default</code> exists, more can be configured in <code>DbPlugin</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Usage</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">.Set up table `ANDROIDS_TABLE`
[e-db-set=ANDROIDS_TABLE]
,===
id, name, height, manufactured

1, Adam, 170, {{at}}
2, Bob, 200, {{at '-1h'}}
,===</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<table e:db-set="ANDROIDS_TABLE" class="tableblock frame-all grid-all stretch" hidden="true" rendered="true">
<caption class="title">Table 5. Set up table <code>ANDROIDS_TABLE</code></caption>
<colgroup>
<col style="width: 25%;" />
<col style="width: 25%;" />
<col style="width: 25%;" />
<col style="width: 25%;" />
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">id</th>
<th class="tableblock halign-left valign-top">name</th>
<th class="tableblock halign-left valign-top">height</th>
<th class="tableblock halign-left valign-top">manufactured</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adam</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">170</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">{{at}}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bob</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">200</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">{{at '-1h'}}</p></td>
</tr>
</tbody>
</table><table class="table table-sm caption-top"><caption style="width:max-content"><i class="fa fa-database me-1"> </i>  Table 5. Set up table ANDROIDS_TABLE</caption><thead class="thead-default"><tr><th class="">id</th><th class="">name</th><th class="">height</th><th class="">manufactured</th></tr></thead><tbody><tr><td class=""><span>1</span></td><td class=""><span>Adam</span></td><td class=""><span>170</span></td><td class=""><span>2024-01-18T23:15:05.351</span></td></tr><tr><td class=""><span>2</span></td><td class=""><span>Bob</span></td><td class=""><span>200</span></td><td class=""><span>2024-01-18T22:15:05.351</span></td></tr></tbody></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="e-db-check">e-db-check</h3>
<div class="paragraph">
<p>Creates <a href="http://dbunit.sourceforge.net/">DbUnit</a> dataset for table and verifies it against a database.</p>
</div>
<div class="hdlist">
<div class="title">Attributes</div>
<table>
<tr>
<td class="hdlist1">
<code>where</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: not set.</em></p>
<div class="paragraph">
<p><em>WHERE</em> clause in database-specific SQL format to filter actual dataset</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>orderBy</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: columns in order of declaration.</em></p>
<div class="paragraph">
<p>List of columns to sort records before verifying</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>ds</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: <code>default</code>.</em></p>
<div class="paragraph">
<p>Datasource to apply dataset. By default, only 1 datasource with name <code>default</code> exists, more can be configured in <code>DbPlugin</code>.</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>awaitAtMostSec</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: 4.</em></p>
<div class="paragraph">
<p>How long to wait in seconds before failing the verification</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>awaitPollDelayMillis</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: 0.</em></p>
<div class="paragraph">
<p>How long to wait in millis before starting verification</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>awaitPollIntervalMillis</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: 1000.</em></p>
<div class="paragraph">
<p>How long to wait in millis between verification attempts</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important" />
</td>
<td class="content">
<strong>Waiting is disabled by default</strong>. Check will fail immediately in case of mismatch unless at least one of the
<code>awaitAtMostSec</code>, <code>awaitPollDelayMillis</code> or <code>awaitPollIntervalMillis</code> attributes are set.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Usage</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">.Check table
[e-db-check=ANDROIDS_TABLE]
,===
id, name, height, manufactured

1, Adam, 170, {{at}}
2, Bob, 200, {{at '-1h'}}
,===</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<table class="table table-sm caption-top"><caption style="width:max-content"><i class="fa fa-database me-1"> </i>  Table 6. Check table</caption><thead class="thead-default"><tr><th class="">id</th><th class="">name</th><th class="">height</th><th class="">manufactured</th></tr></thead><tbody><tr><td class=" table-success"><span title="1" data-toggle="tooltip" data-placement="top" style="">1</span></td><td class=" table-success"><span title="Adam" data-toggle="tooltip" data-placement="top" style="">Adam</span></td><td class=" table-success"><span title="170" data-toggle="tooltip" data-placement="top" style="">1.7E+2</span></td><td class=" table-success"><span title="2024-01-18T23:15:05.351" data-toggle="tooltip" data-placement="top" style="">2024-01-18T23:15:05.351</span></td></tr><tr><td class=" table-success"><span title="2" data-toggle="tooltip" data-placement="top" style="">2</span></td><td class=" table-success"><span title="Bob" data-toggle="tooltip" data-placement="top" style="">Bob</span></td><td class=" table-success"><span title="200" data-toggle="tooltip" data-placement="top" style="">2E+2</span></td><td class=" table-success"><span title="2024-01-18T22:15:05.351" data-toggle="tooltip" data-placement="top" style="">2024-01-18T22:15:05.351</span></td></tr></tbody></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="e-db-clean">e-db-clean</h3>
<div class="paragraph">
<p>Cleans specified tables in a database.</p>
</div>
<div class="hdlist">
<div class="title">Attributes</div>
<table>
<tr>
<td class="hdlist1">
<code>ds</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: <code>default</code>.</em></p>
<div class="paragraph">
<p>Datasource to apply dataset. By default, only 1 datasource with name <code>default</code> exists, more can be configured in <code>DbPlugin</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Usage</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">Clean tables: [e-db-clean]#person, person_fields#</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note" />
</td>
<td class="content">
Tables will be cleaned up in the order opposite to declaration, hence the "referenced" tables should go first and the "referencing" - last.
</td>
</tr>
</table>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Clean tables: <span class="e-db-clean" e:db-clean="#TEXT" rendered="true">person, person_fields</span></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="e-db-execute">e-db-execute</h3>
<div class="paragraph">
<p>Applies specified <a href="http://dbunit.sourceforge.net/">DbUnit</a> datasets to database.</p>
</div>
<div class="hdlist">
<div class="title">Attributes</div>
<table>
<tr>
<td class="hdlist1">
<code>operation</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: <code>clean_insert</code>.</em></p>
<div class="paragraph">
<p><a href="https://dbunit.sourceforge.net/dbunit/components.html#databaseoperation">DbUnit operation</a></p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>ds</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: <code>default</code>.</em></p>
<div class="paragraph">
<p>Datasource to apply dataset. By default, only 1 datasource with name <code>default</code> exists, more can be configured in <code>DbPlugin</code>.</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>dir</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: empty string.</em></p>
<div class="paragraph">
<p>Set directory in <code>src/test/resources</code> as working directory so that all datasets from <code>datasets</code> attribute will be relative to it: <code>src/test/resources[dir][item in datasets]</code></p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Usage</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">Execute datasets: +++&lt;e e:db-execute='adam.xml, bob.json' dir='/data/db/'/&gt;+++</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock given">
<div class="title">adam.xml</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="xml">&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;dataset&gt;
  &lt;PERSON ID="1" NAME="Adam" AGE="10" BIRTHDAY="{{today}}"/&gt;
  &lt;PERSON_FIELDS ID="11..19" NAME="a1" VAL="{{a1}}" PERSON_ID="1"/&gt;
  &lt;PERSON_FIELDS ID="11..19" NAME="a2" VAL="{{a2}}" PERSON_ID="1"/&gt;
&lt;/dataset&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">bob.json</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="json">{
  "PERSON": [
    {"id": 10, "name": "Bob", "age": 20, "BIRTHDAY": "2000-10-10 00:00:00"}
  ],
  "PERSON_FIELDS": [
    {"id": "21..30", "name": "b1", "val": "1", "person_id": 10},
    {"id": "21..30", "name": "b2", "val": "2", "person_id": 10}
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="e-set=a1 hide" e:set="a1">1</span>
<span class="e-set=a2 hide" e:set="a2">2</span></p>
</div>
<div class="paragraph then">
<p>Execute datasets: <e e:db-execute="adam.xml, bob.json" dir="/data/db/" rendered="true"><table class="table table-sm caption-top"><caption style="width:max-content"><i class="fa fa-database me-1"> </i>  PERSON</caption><thead class="thead-default"><tr><th class="">ID</th><th class="">NAME</th><th class="">AGE</th><th class="">BIRTHDAY</th></tr></thead><tbody><tr><td class=""><span>1</span></td><td class=""><span>Adam</span></td><td class=""><span>10</span></td><td class=""><span>2024-01-18T00:00:00</span></td></tr><tr><td class=""><span>10</span></td><td class=""><span>Bob</span></td><td class=""><span>20</span></td><td class=""><span>2000-10-10 00:00:00</span></td></tr></tbody></table><table class="table table-sm caption-top"><caption style="width:max-content"><i class="fa fa-database me-1"> </i>  PERSON_FIELDS</caption><thead class="thead-default"><tr><th class="">ID</th><th class="">NAME</th><th class="">VAL</th><th class="">PERSON_ID</th></tr></thead><tbody><tr><td class=""><span>11</span></td><td class=""><span>a1</span></td><td class=""><span>1</span></td><td class=""><span>1</span></td></tr><tr><td class=""><span>12</span></td><td class=""><span>a2</span></td><td class=""><span>2</span></td><td class=""><span>1</span></td></tr><tr><td class=""><span>21</span></td><td class=""><span>b1</span></td><td class=""><span>1</span></td><td class=""><span>10</span></td></tr><tr><td class=""><span>22</span></td><td class=""><span>b2</span></td><td class=""><span>2</span></td><td class=""><span>10</span></td></tr></tbody></table></e></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="e-db-verify">e-db-verify</h3>
<div class="paragraph">
<p>Verifies specified <a href="http://dbunit.sourceforge.net/">DbUnit</a> datasets against database.</p>
</div>
<div class="hdlist">
<div class="title">Attributes</div>
<table>
<tr>
<td class="hdlist1">
<code>dir</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: empty string.</em></p>
<div class="paragraph">
<p>Set directory in <code>src/test/resources</code> as working directory so that all datasets from <code>datasets</code> attribute will be relative to it: <code>src/test/resources[dir][item in datasets]</code></p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>orderBy</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: columns in order of declaration.</em></p>
<div class="paragraph">
<p>List of columns to sort records before verifying</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>ds</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: <code>default</code>.</em></p>
<div class="paragraph">
<p>Datasource to apply dataset. By default, only 1 datasource with name <code>default</code> exists, more can be configured in <code>DbPlugin</code>.</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>awaitAtMostSec</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: 4.</em></p>
<div class="paragraph">
<p>How long to wait in seconds before failing the verification</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>awaitPollDelayMillis</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: 0.</em></p>
<div class="paragraph">
<p>How long to wait in millis before starting verification</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>awaitPollIntervalMillis</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: 1000.</em></p>
<div class="paragraph">
<p>How long to wait in millis between verification attempts</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important" />
</td>
<td class="content">
<strong>Waiting is disabled by default</strong>. Check will fail immediately in case of mismatch unless at least one of the
<code>awaitAtMostSec</code>, <code>awaitPollDelayMillis</code> or <code>awaitPollIntervalMillis</code> attributes are set.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Usage</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">Verify datasets: +++&lt;e e:db-verify='adam.xml, bob.json' dir='/data/db/'/&gt;+++</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock given">
<div class="title">adam.xml</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="xml">&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;dataset&gt;
  &lt;PERSON ID="1" NAME="Adam" AGE="10" BIRTHDAY="{{today}}"/&gt;
  &lt;PERSON_FIELDS ID="11..19" NAME="a1" VAL="{{a1}}" PERSON_ID="1"/&gt;
  &lt;PERSON_FIELDS ID="11..19" NAME="a2" VAL="{{a2}}" PERSON_ID="1"/&gt;
&lt;/dataset&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">bob.json</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="json">{
  "PERSON": [
    {"id": 10, "name": "Bob", "age": 20, "BIRTHDAY": "2000-10-10 00:00:00"}
  ],
  "PERSON_FIELDS": [
    {"id": "21..30", "name": "b1", "val": "1", "person_id": 10},
    {"id": "21..30", "name": "b2", "val": "2", "person_id": 10}
  ]
}</code></pre>
</div>
</div>
<div class="paragraph then">
<p>Verify datasets: <e e:db-verify="adam.xml, bob.json" dir="/data/db/" rendered="true"><table class="table table-sm caption-top"><caption style="width:max-content"><i class="fa fa-database me-1"> </i>  PERSON</caption><thead class="thead-default"><tr><th class="">ID</th><th class="">NAME</th><th class="">AGE</th><th class="">BIRTHDAY</th></tr></thead><tbody><tr><td class=" table-success"><span title="1" data-toggle="tooltip" data-placement="top" style="">1</span></td><td class=" table-success"><span title="Adam" data-toggle="tooltip" data-placement="top" style="">Adam</span></td><td class=" table-success"><span title="10" data-toggle="tooltip" data-placement="top" style="">1E+1</span></td><td class=" table-success"><span title="2024-01-18T00:00:00" data-toggle="tooltip" data-placement="top" style="">2024-01-18T00:00:00</span></td></tr><tr><td class=" table-success"><span title="10" data-toggle="tooltip" data-placement="top" style="">10</span></td><td class=" table-success"><span title="Bob" data-toggle="tooltip" data-placement="top" style="">Bob</span></td><td class=" table-success"><span title="20" data-toggle="tooltip" data-placement="top" style="">2E+1</span></td><td class=" table-success"><span title="2000-10-10 00:00:00" data-toggle="tooltip" data-placement="top" style="">2000-10-10T00:00:00</span></td></tr></tbody></table><table class="table table-sm caption-top"><caption style="width:max-content"><i class="fa fa-database me-1"> </i>  PERSON_FIELDS</caption><thead class="thead-default"><tr><th class="">ID</th><th class="">NAME</th><th class="">VAL</th><th class="">PERSON_ID</th></tr></thead><tbody><tr><td class=" table-success"><span title="11" data-toggle="tooltip" data-placement="top" style="">11</span></td><td class=" table-success"><span title="a1" data-toggle="tooltip" data-placement="top" style="">a1</span></td><td class=" table-success"><span title="1" data-toggle="tooltip" data-placement="top" style="">1</span></td><td class=" table-success"><span title="1" data-toggle="tooltip" data-placement="top" style="">1</span></td></tr><tr><td class=" table-success"><span title="12" data-toggle="tooltip" data-placement="top" style="">12</span></td><td class=" table-success"><span title="a2" data-toggle="tooltip" data-placement="top" style="">a2</span></td><td class=" table-success"><span title="2" data-toggle="tooltip" data-placement="top" style="">2</span></td><td class=" table-success"><span title="1" data-toggle="tooltip" data-placement="top" style="">1</span></td></tr><tr><td class=" table-success"><span title="21" data-toggle="tooltip" data-placement="top" style="">21</span></td><td class=" table-success"><span title="b1" data-toggle="tooltip" data-placement="top" style="">b1</span></td><td class=" table-success"><span title="1" data-toggle="tooltip" data-placement="top" style="">1</span></td><td class=" table-success"><span title="10" data-toggle="tooltip" data-placement="top" style="">10</span></td></tr><tr><td class=" table-success"><span title="22" data-toggle="tooltip" data-placement="top" style="">22</span></td><td class=" table-success"><span title="b2" data-toggle="tooltip" data-placement="top" style="">b2</span></td><td class=" table-success"><span title="2" data-toggle="tooltip" data-placement="top" style="">2</span></td><td class=" table-success"><span title="10" data-toggle="tooltip" data-placement="top" style="">10</span></td></tr></tbody></table></e></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="e-db-show">e-db-show</h3>
<div class="paragraph">
<p>Prints content of specified database table and optionally generates DbUnit dataset.</p>
</div>
<div class="hdlist">
<div class="title">Attributes</div>
<table>
<tr>
<td class="hdlist1">
<code>where</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: not set.</em></p>
<div class="paragraph">
<p><em>WHERE</em> clause in database-specific SQL format to filter actual dataset</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>ds</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: <code>default</code>.</em></p>
<div class="paragraph">
<p>Datasource to apply dataset. By default, only 1 datasource with name <code>default</code> exists, more can be configured in <code>DbPlugin</code>.</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>saveToResources</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: not set.</em></p>
<div class="paragraph">
<p>Path in 'srs/test/resources/' to store generated dataset</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Usage</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">.Show all and generate dataset
[e-db-show=ANDROIDS_TABLE, e-saveToResources=/data/db/ANDROIDS_TABLE.xml]
,===
,===

.Show specific columns
[e-db-show=ANDROIDS_TABLE]
,===
id, name

,===

.Show specific rows
[e-db-show=ANDROIDS_TABLE, e-where="name='Bob'"]
,===
id, name

,===</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<table e:db-show="ANDROIDS_TABLE" e:saveToResources="/data/db/ANDROIDS_TABLE.xml" class="tableblock frame-all grid-all stretch" hidden="true" rendered="true">
<caption class="title">Table 7. Show all and generate dataset</caption>
</table><table class="table table-sm caption-top"><caption style="width:max-content"><i class="fa fa-database me-1"> </i>  Table 7. Show all and generate dataset</caption><thead class="thead-default"><tr><th class="">ID</th><th class="">NAME</th><th class="">HEIGHT</th><th class="">WEIGHT</th><th class="">MANUFACTURED</th></tr></thead><tbody><tr><td class=""><span>1</span></td><td class=""><span>Adam</span></td><td class=""><span>1.7E+2</span></td><td class=""><span>(null)</span></td><td class=""><span>2024-01-18T23:15:05.351</span></td></tr><tr><td class=""><span>2</span></td><td class=""><span>Bob</span></td><td class=""><span>2E+2</span></td><td class=""><span>(null)</span></td><td class=""><span>2024-01-18T22:15:05.351</span></td></tr></tbody></table><pre><code class="language-xml">&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;dataset&gt;
  &lt;ANDROIDS_TABLE ID="1" NAME="Adam" HEIGHT="1.7E+2" MANUFACTURED="2024-01-18 23:15:05.351"/&gt;
  &lt;ANDROIDS_TABLE ID="2" NAME="Bob" HEIGHT="2E+2" MANUFACTURED="2024-01-18 22:15:05.351"/&gt;
&lt;/dataset&gt;
</code></pre>
<table e:db-show="ANDROIDS_TABLE" class="tableblock frame-all grid-all stretch" hidden="true" rendered="true">
<caption class="title">Table 8. Show specific columns</caption>
<colgroup>
<col style="width: 50%;" />
<col style="width: 50%;" />
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">id</th>
<th class="tableblock halign-left valign-top">name</th>
</tr>
</thead>
</table><table class="table table-sm caption-top"><caption style="width:max-content"><i class="fa fa-database me-1"> </i>  Table 8. Show specific columns</caption><thead class="thead-default"><tr><th class="">ID</th><th class="">NAME</th></tr></thead><tbody><tr><td class=""><span>1</span></td><td class=""><span>Adam</span></td></tr><tr><td class=""><span>2</span></td><td class=""><span>Bob</span></td></tr></tbody></table>
<table e:where="name='Bob'" e:db-show="ANDROIDS_TABLE" class="tableblock frame-all grid-all stretch" hidden="true" rendered="true">
<caption class="title">Table 9. Show specific rows</caption>
<colgroup>
<col style="width: 50%;" />
<col style="width: 50%;" />
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">id</th>
<th class="tableblock halign-left valign-top">name</th>
</tr>
</thead>
</table><table class="table table-sm caption-top"><caption style="width:max-content"><i class="fa fa-database me-1"> </i>  Table 9. Show specific rows</caption><thead class="thead-default"><tr><th class="">ID</th><th class="">NAME</th></tr></thead><tbody><tr><td class=""><span>2</span></td><td class=""><span>Bob</span></td></tr></tbody></table>
</div>
</div>
<hr />
</div>
</div>
</div>
<div class="sect1">
<h2 id="_message_queue_plugin">Message Queue plugin</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>MqPlugin</code> enables to set up and verify the state of some message queue. A message queue is represented
as an implementation of the <code>io.github.adven27.concordion.extensions.exam.mq.MqTester</code> interface
and that <strong>implementation is responsible for interacting with that specific queue</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/mq.png" alt="mq" width="302" height="205" />
</div>
</div>
<div class="paragraph">
<p>There are several out-of-the-box implementations that can be used directly or as an example for custom ones:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/Adven27/Exam/tree/master/exam-mq-kafka">exam-mq-kafka</a></p>
</li>
<li>
<p><a href="https://github.com/Adven27/Exam/tree/master/exam-mq-rabbit">exam-mq-rabbit</a></p>
</li>
<li>
<p><a href="https://github.com/Adven27/Exam/tree/master/exam-mq-ibmmq">exam-mq-ibmmq</a></p>
</li>
<li>
<p><a href="https://github.com/Adven27/Exam/tree/master/exam-mq-redis">exam-mq-redis</a></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Dependency</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="groovy">testImplementation "io.github.adven27:exam-mq:2024.0.0"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Configuration</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="kotlin">open class Specs : AbstractSpecs() {
    override fun init() = ExamExtension(
        MqPlugin(
            mapOf(
                "someRabbitQueue" to RabbitTester(
                    port = 5432,
                    sendConfig = SendConfig("someRoutingKey"),
                    receiveConfig = ReceiveConfig("someQueueName")
                ),
                "dummyQueue" to object : MqTester {
                    private val queue = ArrayDeque&lt;Message&gt;()

                    /* open connection*/
                    override fun start() = Unit

                    /* close connection*/
                    override fun stop() = Unit

                    override fun send(message: Message) {
                        queue += message
                    }

                    override fun receive(): List&lt;Message&gt; = queue.map { queue.poll() }
                    override fun purge() = queue.clear()
                    override fun accumulateOnRetries(): Boolean = true
                }
            )
        )
    )</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note" />
</td>
<td class="content">
<code>MqPlugin</code> accepts a map of a <code>&lt;queue alias name&gt;</code> to a <code>MqTester</code> implementation.
<em>Queue alias</em> is a queue logical name: <code>&lt;e e:mq-set="out"/&gt;</code>
</td>
</tr>
</table>
</div>
<div class="ulist unstyled">
<div class="title">Commands</div>
<ul class="unstyled">
<li>
<p><code><a href="#e-mq-set">e-mq-set</a></code></p>
</li>
<li>
<p><code><a href="#e-mq-check">e-mq-check</a></code></p>
</li>
<li>
<p><code><a href="#e-mq-clean">e-mq-clean</a></code></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="e-mq-set">e-mq-set</h3>
<div class="paragraph">
<p>Sends messages to specified queue.</p>
</div>
<div class="listingblock">
<div class="title">Usage</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">.Sending message to {queue2}
[source,json,e-mq-set={queue2}]
----
{ "a": 1, "d": "dd" }
----</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Sending message to myAnotherQueue</div>
<div class="content">
<pre class="highlight.js highlight"><code e:mq-set="myAnotherQueue" data-lang="json" rendered="true">{ "a": 1, "d": "dd" }</code></pre>
</div>
</div>
</div>
</div>
<div class="listingblock">
<div class="title">Sending message with headers and params which could be used by <code>MqTester</code>:</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">.Sending message with headers and params to {queue2}
[e-mq-set={queue2}]
--
[.params]
.Params
[cols="h,1", caption=]
,===
key, some-kafka-message-key
partition, 1
,===

[.headers]
.Headers
[cols="h,1", caption=]
,===
h1, 1
h2, 2
,===

[source,json]
----
{"timestamp": "{{iso (at '-1h')}}"}
----
--</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="openblock">
<div class="title">Sending message with headers and params to myAnotherQueue</div>
<div class="content" e:mq-set="myAnotherQueue" rendered="true">
<table class="tableblock frame-all grid-all stretch params">
<caption class="title">Params</caption>
<colgroup>
<col style="width: 50%;" />
<col style="width: 50%;" />
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">key</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">some-kafka-message-key</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">partition</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch headers">
<caption class="title">Headers</caption>
<colgroup>
<col style="width: 50%;" />
<col style="width: 50%;" />
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">h1</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">h2</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlight.js highlight"><code data-lang="json">{"timestamp": "2024-01-18T22:15:05.351"}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="listingblock">
<div class="title">Sending several messages:</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">.Sending several messages to myQueue
[cols="a", grid=rows, frame=ends, caption=, e-mq-set=myQueue]
|===
| Message without headers:
[source,json]
----
{{file '/specs/../data/mq/msg.json' msg=(map v1='a' v2='b')}}
----

| Message with headers and params which could be used by `MqTester`

[.params]
.Params
[cols="h,1", caption=]
,===
key, some-kafka-message-key
partition, 1
,===

[.headers]
.Headers
[cols="h,1", caption=]
,===
h1, {{isoDate (at '-1d')}}
h2, 2
,===

[source,json]
----
{{file '/specs/../data/mq/msg.json' msg=(map v1='c' v2='d')}}
----
|===</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<table e:mq-set="myQueue" class="tableblock frame-ends grid-rows stretch" rendered="true">
<caption class="title">Sending several messages to myQueue</caption>
<colgroup>
<col style="width: 100%;" />
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Message without headers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight.js highlight"><code data-lang="json">{
  "date": "2024-01-18",
  "var1": "a",
  "var2": "b",
  "var3": "3"
}</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Message with headers and params which could be used by <code>MqTester</code></p>
</div>
<table class="tableblock frame-all grid-all stretch params">
<caption class="title">Params</caption>
<colgroup>
<col style="width: 50%;" />
<col style="width: 50%;" />
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">key</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">some-kafka-message-key</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">partition</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch headers">
<caption class="title">Headers</caption>
<colgroup>
<col style="width: 50%;" />
<col style="width: 50%;" />
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">h1</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">2024-01-17</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">h2</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlight.js highlight"><code data-lang="json">{
  "date": "2024-01-18",
  "var1": "c",
  "var2": "d",
  "var3": "3"
}</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="e-mq-check">e-mq-check</h3>
<div class="paragraph">
<p>Check messages in queue.</p>
</div>
<div class="hdlist">
<div class="title">Attributes</div>
<table>
<tr>
<td class="hdlist1">
<code>contains</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: <code>EXACT</code>.</em></p>
<div class="paragraph">
<p>Messages list verifying  mode. Supported values: <code>EXACT</code>, <code>EXACT_IN_ANY_ORDER</code>.</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>verifier</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: <code>text</code>.</em></p>
<div class="paragraph">
<p>Content type verifier. Built-in values: <code>text</code>, <code>json</code>, <code>xml</code>.</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>awaitAtMostSec</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: 4.</em></p>
<div class="paragraph">
<p>How long to wait in seconds before failing the verification</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>awaitPollDelayMillis</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: 0.</em></p>
<div class="paragraph">
<p>How long to wait in millis before starting verification</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>awaitPollIntervalMillis</code>
</td>
<td class="hdlist2">
<p><em>Optional. Default: 1000.</em></p>
<div class="paragraph">
<p>How long to wait in millis between verification attempts</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important" />
</td>
<td class="content">
<strong>Waiting is disabled by default</strong>. Check will fail immediately in case of mismatch unless at least one of the
<code>awaitAtMostSec</code>, <code>awaitPollDelayMillis</code> or <code>awaitPollIntervalMillis</code> attributes are set.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Usage</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">.Check messages in myQueue
[cols="a", grid=rows, frame=ends, caption=, e-mq-check=myQueue]
|===
| Expected message ignore headers:

[source,json]
----
{{file '/specs/../data/mq/msg.json' msg=(map v1='a' v2='b')}}
----

| Expected message containing headers and params:

[.params]
.Params
[cols="h,1", caption=]
,===
key, some-kafka-message-key
,===

[.headers]
[cols="h,1"]
,===
h1, {{isoDate (at '-1d')}}
,===

[source,json]
----
{{file '/specs/../data/mq/msg.json' msg=(map v1='c' v2='d')}}
----
|===</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="mq-check">
            <table class="tableblock frame-ends grid-rows stretch">
                <caption><i class="fa fa-envelope-open me-1"> </i><span>Check messages in myQueue</span></caption>
                <tbody>         <tr><td class="exp-body">
        
        
        <div class="json success">{
  "date": "2024-01-18",
  "var1": "a",
  "var2": "b",
  "var3": "3"
}</div>
        </td></tr>
        <tr><td class="exp-body">
        <table class="table table-sm caption-top">
    <caption class="small">Params</caption>
    <tbody> <tr><td class="success">key</td><td class="success"><pre>some-kafka-message-key</pre></td></tr> </tbody>
</table>
        <table class="table table-sm caption-top">
    <caption class="small">Headers</caption>
    <tbody> <tr><td class="success">h1</td><td class="success"><pre>2024-01-17</pre></td></tr> </tbody>
</table>
        <div class="json success">{
  "date": "2024-01-18",
  "var1": "c",
  "var2": "d",
  "var3": "3"
}</div>
        </td></tr> </tbody>
            </table>
        </div>
</div>
</div>
<div class="listingblock">
<div class="title">Check emptiness</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">.Check myQueue is empty
[caption=, e-mq-check=myQueue]
|===
|{empty}
|===</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="mq-check">
    <table class="tableblock frame-ends grid-rows stretch">
        <caption><i class="fa fa-envelope-open me-1"> </i><span>Check myQueue is empty</span></caption>
        <tbody> <tr><td class="exp-body success">EMPTY</td></tr> </tbody>
    </table>
</div>
</div>
</div>
<div class="listingblock">
<div class="title">Custom content type verifier</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="kotlin">import io.github.adven27.concordion.extensions.exam.core.AbstractSpecs
import io.github.adven27.concordion.extensions.exam.core.ExamExtension
import io.github.adven27.concordion.extensions.exam.core.JsonVerifier
import net.javacrumbs.jsonunit.core.Option.IGNORING_EXTRA_FIELDS

class Specs : AbstractSpecs() {

    override fun init() = ExamExtension(
        //...
    ).withVerifiers(
        mapOf("jsonIgnoreExtraFields" to JsonVerifier { it.withOptions(IGNORING_EXTRA_FIELDS) })
    )
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Use custom content verifier</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">.Check with registered `jsonIgnoreExtraFields` verifier
[cols="a", grid=rows, frame=ends, caption=, e-mq-check=myQueue]
|===
| Expected ISO-formatted `date` and ignore extra fields:

[source,json,e-verifier=jsonIgnoreExtraFields]
----
{"date":  "{{isoDate}}"}
----
|===</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock given">
<div class="title">myQueue has message</div>
<div class="content">
<pre class="highlight.js highlight"><code e:mq-set="myQueue" data-lang="json" rendered="true">{
  "date": "2024-01-18",
  "var1": "1",
  "var2": "2",
  "var3": "3"
}</code></pre>
</div>
</div>
<div class="paragraph then">
<p />
</div>
<div class="mq-check">
            <table class="tableblock frame-ends grid-rows stretch">
                <caption><i class="fa fa-envelope-open me-1"> </i><span>Check with registered jsonIgnoreExtraFields verifier</span></caption>
                <tbody>         <tr><td class="exp-body">
        
        
        <div class="json success">{
  "date": "${test-unit.matches:formattedAs}yyyy-MM-dd"
}</div>
        </td></tr> </tbody>
            </table>
        </div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="e-mq-clean">e-mq-clean</h3>
<div class="paragraph">
<p>Cleans specified queues.</p>
</div>
<div class="listingblock">
<div class="title">Usage</div>
<div class="content">
<pre class="highlight.js highlight"><code data-lang="asciidoc">Queues are empty: [e-mq-clean]_myQueue, myAnotherQueue_</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Queues are empty: <em class="e-mq-clean" e:mq-clean="#TEXT" rendered="true">myQueue, myAnotherQueue</em></p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<link rel="stylesheet" href="../ext/ascii/highlight/styles/stackoverflow-light.min.css">.</link>
<link rel="stylesheet" href="../ext/ascii/highlight/styles/highlightjs-copy.min.css">.</link>
<script src="../ext/ascii/highlight/highlight.min.js">.</script>
<script src="../ext/ascii/highlight/highlightjs-copy.min.js">.</script>
<script>
window.addEventListener('DOMContentLoaded', function (event) {
    jQuery(".details").wrap(unescape("&lt;details&gt;&lt;/details&gt;"));
    jQuery(".pre").wrap(unescape("&lt;pre&gt;&lt;/pre&gt;"));
    jQuery("table").wrap(unescape("&lt;div class='table-responsive'&gt;&lt;/div&gt;"));
    enableCM();
    hljs.configure({cssSelector: 'pre code[data-lang], pre code[class^="language-"], pre code[class*=" language-"], pre.code' });
    hljs.addPlugin(new CopyButtonPlugin());
    hljs.highlightAll();
    let fail = $(".failure").get(0);
    if(fail) fail.scrollIntoView();
});
</script>
<div class="footer">Results generated by <a href="http://www.concordion.org" style="font-weight: bold; text-decoration: none; color: #89C;">Concordion</a><div class="testTime">in 1405 ms on 18-Jan-2024 at 23:15:14 MSK</div><div class="testTime"><a href="SpecsLogViewer.html" style="font-weight: bold; text-decoration: none; color: #89C;">Log File</a></div></div></body>
<button id="btnToTop" onclick="topFunction()" type="button" class="btn btn-light btn-sm text-muted me-1"><i class="fa fa-arrow-up"></i></button></html>